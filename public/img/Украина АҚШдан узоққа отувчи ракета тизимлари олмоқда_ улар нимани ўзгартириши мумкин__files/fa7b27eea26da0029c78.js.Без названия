/*! v:591259 b:default c:old */
(window["pcodeJsonp591259Y07peM7hit"]=window["pcodeJsonp591259Y07peM7hit"]||[]).push([[53],{1634:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeUrl=void 0;var r=(0,n(25).isObject)(n(198).M)&&n(198).M.fn&&(0,n(4).isFunction)(n(198).M.fn.encodeUrl)?n(198).M.fn.encodeUrl:void 0;e.encodeUrl=void 0!==r?function(t){return r(t)}:void 0},1962:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.banner=void 0,e.banner=n(1963).BannerOld},1963:function(t,e,n){"use strict";var r,o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BannerOld=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.hide=function(){this.container&&(this.container.style.display="none")},e.prototype.show=function(){this.container&&(this.container.style.display="")},e.prototype.destroy=function(){this.cancelObserver(),this.destroyAdContainer(),this.destroyTransport(),t.prototype.destroy.call(this)},e.prototype.processParams=function(e){var r="";return e.jsEncoded?r=decodeURIComponent(e.jsEncoded):e.jsBase64&&(r=(0,n(121).decode)(e.jsBase64)),e.prepareCodeData=r.split("<\/script>").join("<\\/script>"),t.prototype.processParams.call(this,e)},e.prototype.render=function(){var t=this.params.pr1;this.createAdContainer(t),this.initObserver(),this.createTransport(t),this.params.prepareCodeData?this.transport.emulateRequestWithData(this.params.prepareCodeData):this.transport.sendRequestWithUrl(this.params.prepareCodeUrl)},e.prototype.createTransport=function(t){var e=this;this.transport=new(n(1964).IFrameTransport)(t,this.win,this.container,this.params.cspNonce),this.transport.setCallbacks({error:function(t){return e.triggerCallback("onError",t)},load:function(){return e.handleTransportLoad()},loadAdFoxBundle:function(t){var r=(0,n(376).deepCopy)(t);e.handleTransportSuccess(r)}})},e.prototype.destroyTransport=function(){this.transport&&(this.transport.destroy(),this.transport=null)},e.prototype.handleTransportLoad=function(){this.onTransportLoad&&this.onTransportLoad(),this.triggerCallback("onLoad")},e.prototype.handleTransportSuccess=function(t){this.cancelObserver(),this.triggerCallback("onLoad"),this.triggerCallback("onLoadAnotherBundle",t)},e.prototype.initObserver=function(){var t=this,e=function(){t.triggerCallback("onRender")};this.cancelObserve="undefined"!=typeof MutationObserver?this.createObserver(e):this.createObserverForOldBrowsers(e)},e.prototype.cancelObserver=function(){this.cancelObserve&&(this.cancelObserve(),this.cancelObserve=null)},e.prototype.createObserver=function(t){function e(){n.disconnect()}var n=new MutationObserver((function(){e(),t()}));return n.observe(this.adContainer,{childList:!0}),e},e.prototype.createObserverForOldBrowsers=function(t){var e=this;return this.onTransportLoad=t,function(){return e.onTransportLoad=null}},e.prototype.createAdContainer=function(t){this.adContainer=this.doc.createElement("div"),this.adContainer.id="AdFox_banner_"+t,this.container&&this.container.appendChild(this.adContainer)},e.prototype.destroyAdContainer=function(){(0,n(81).removeNodeFromParent)(this.adContainer)},e}(i(n(345))["default"]);e.BannerOld=s},1964:function(t,e,n){"use strict";e.__esModule=!0,e.IFrameTransport=r;function r(t,e,n,r){this._cspNonce=r,this._win=e,this._doc=e.document,this._pr1=t,this._container=n,this._callbacks={},this._isDestroyed=!1}r.prototype={constructor:r,sendRequestWithUrl:function(t){this._prepareCodeUrl=t,this._init()},emulateRequestWithData:function(t){this._prepareCodeData=t,this._init()},destroy:function(){this._movingChecker&&(this._movingChecker(),this._movingChecker=null),this._isDestroyed=!0,this._beforeDestroy(),this._removeSandbox()},setCallbacks:function(t){this._callbacks=t},_triggerCallback:function(t,e){if(!this._isDestroyed){if("error"===t&&(this._isCatchError=!0,this._isLoad||(this._closeSandboxDocument(),e.type="adfoxBackend")),"load"===t&&(this._isLoad=!0,this._isCatchError))return;this._callbacks[t]&&this._callbacks[t](e)}},_getSandbox:function(){return this._sandbox||(this._sandbox=this._doc.createElement("iframe"),this._sandbox.id="AdFox_iframe_"+this._pr1,this._sandbox.name="adfox_transport_"+this._pr1,this._sandbox.style.display="none",this._container.appendChild(this._sandbox)),this._sandbox},_init:function(){var t=this;this._isDestroyed=!1;var e=this._getSandbox();this._movingChecker=(0,n(1351).initMovementChecking)(this._sandbox,(function(){t._win.console&&t._win.console.error&&t._win.console.error(t._sandbox,"Adfox transport frame was moved")})),(0,n(1588).onSandboxReady)(e,(function(){return t._insertContent(e)}))},_insertContent:function(t){var e=this._getPrepareCode(),n=this._getReadyCode(),r=t.contentDocument;this._isSandboxOpen=!0,r.open(),this._addSandboxEventListener(),r.write('<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),r.write(e),r.write(n)},_addSandboxEventListener:function(){var t=this,e=this._sandbox.contentWindow;this._errorListener=function(e){t._triggerCallback("error",{type:"userScriptError",message:e.message||"Script error in frame"})},(0,n(304).addEvent)(e,"error",this._errorListener),e.onPrepareCodeError=function(){t._triggerCallback("error",{type:"adfoxBackend",message:"Can't load AdFox prepare code"})},e.onPrepareCodeLoad=function(){(0,n(304).removeEvent)(e,"error",t._errorListener),t._triggerCallback("load")},e.loadAdFoxBundle=function(e){t._triggerCallback("loadAdFoxBundle",e)}},_getNonce:function(){return this._cspNonce?' nonce="'+this._cspNonce+'"':""},_getReadyCode:function(){return"<script"+this._getNonce()+">if(window.onPrepareCodeLoad){window.onPrepareCodeLoad()}<\/script>"},_getPrepareCode:function(){var t=this._prepareCodeData?"":' src="'+this._prepareCodeUrl+'"',e=this._prepareCodeData||"";return"<script\n                    "+this._getNonce()+'\n                    onerror="window.onPrepareCodeError()"\n                    charset="utf-8"'+t+">"+e+"\n                <\/script>"},_beforeDestroy:function(){if(this._sandbox){var t=this._sandbox.contentWindow;t&&"function"==typeof t.adfoxRemoveBanner&&t.adfoxRemoveBanner()}},_removeSandbox:function(){this._sandbox&&(this._closeSandboxDocument(),(0,n(81).removeNodeFromParent)(this._sandbox),this._sandbox=null)},_closeSandboxDocument:function(){this._isSandboxOpen&&(this._sandbox.contentDocument&&this._sandbox.contentDocument.close(),this._isSandboxOpen=!1)}}},1965:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.banner=void 0,e.banner=n(1966).BannerOldProtected},1966:function(t,e,n){"use strict";var r,o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BannerOldProtected=void 0;var a=function(t){function e(e,r,o){var i=t.call(this,e,r,o)||this;return i.id=(0,n(68).generatePr)().toString(),i.isTurbo=(0,n(163).isAdfoxPageTurbo)(i.win),i}return o(e,t),e.prototype.destroy=function(){(0,n(147).nukeSafeframe)(this.win,this.id),t.prototype.destroy.call(this)},e.prototype.render=function(){var t,e=this.doc.createElement("div");null===(t=this.container)||void 0===t||t.appendChild(e),(0,n(147).initSafeframe)(this.win,e,this.prepareSFData())},e.prototype.afterRender=function(){var t=this;(0,n(304).addEvent)(this.win,"message",(function(e){return t.onMessage(e)}))},e.prototype.prepareSFData=function(){var t,e="sfc-".concat(this.id),r=n.lv["json"].stringify(this.params);t=(0,n(1967).isAdblock)()?"":'crossorigin="anonymous" ';var o='\n            <div id="c"></div>\n            <script>\n                function p(m) {\n                    parent.postMessage(\''.concat(e,"' + m, '*');\n                }\n                var ns = 'adfoxAsyncParams', w = window, d = document, e = d.getElementById('c');\n                ").concat((0,n(17).getScriptStringForSettingGlobalVars)({isXhr:this.params.isXhr}),"\n                w[ns].push({\n                    containerId: 'c',\n                    data: { data: [").concat(r,"] },\n                    isTurbo: ").concat(this.isTurbo,",\n                    onError: function() {\n                        p('error');\n                    },\n                    onStub: function() {\n                        p('stub');\n                    },\n                    onDestroy: function() {\n                        p('destroy');\n                    },\n                    onRender: function() {\n                        p('render');\n                    },\n                });\n            <\/script>\n            <script src=\"https://yastatic.net/pcode/adfox/loader.js\" ").concat(t," async><\/script>;\n        ");return i(i({},this.getSize()),{nonce:this.params.cspNonce,html:o,supports:{"exp-push":!0}})},e.prototype.getSize=function(){return{width:this.isTurbo?this.params.attributes.width:"100%",height:this.isTurbo?this.params.attributes.height:1}},e.prototype.onMessage=function(t){t.data==="sfc-".concat(this.id,"-error")&&this.triggerCallback("onError"),t.data==="sfc-".concat(this.id,"-destroy")&&this.triggerCallback("onDestroy"),t.data==="sfc-".concat(this.id,"-render")&&this.triggerCallback("onRender"),t.data==="sfc-".concat(this.id,"-stub")&&this.triggerCallback("onStub")},e}(s(n(345))["default"]);e.BannerOldProtected=a},1967:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAdblock=void 0,e.isAdblock=function(){var t=n(44).config&&n(44).config.encode&&n(44).config.encode.key;return Boolean(n(1968).videoEncode)||-1===["","__ADB_KEY__"].indexOf(t)}},1968:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.videoEncode=void 0,e.videoEncode=(0,n(1969).getVideoEncode)(window)},1969:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getVideoEncode=void 0;e.getVideoEncode=function(t){if(void 0===t&&(t=window),n(1634).encodeUrl)return n(1634).encodeUrl;for(var e=(0,n(1349).getFriendlyWindowsChain)(t);e.length;){var r=e.pop();if(r){var o=(0,n(195).get)(r,"ya.videoAd.encodeUrl");if((0,n(4).isFunction)(o))return o}}}},323:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.objectCreate=void 0,e.objectCreate=(0,n(324).getNativeMethod)(Object,"create")?Object.create:function(t,e){function r(){}if(r.prototype=t,(0,n(25).isObject)(e))for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return new r}},324:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNativeMethod=void 0,e.getNativeMethod=function(t,e){var r=t[e];if(!(0,n(22).checkNativeCode)(r)){var o=r;try{delete t[e],r=t[e],t[e]=o}catch(t){}}return r}},376:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=void 0;e.deepCopy=function(t,r){void 0===r&&(r={preserveConstructors:!0});var o=t;return(0,n(9).isArray)(t)?t.map((function(t){return(0,e.deepCopy)(t,r)})):(0,n(164).isDate)(t)?new Date(t.getTime()):(!(0,n(4).isFunction)(t)&&(0,n(25).isObject)(t)&&(o=r.preserveConstructors?(0,n(323).objectCreate)(t):{},(0,n(19).forOwn)(t,(function(t,n){o[n]=(0,e.deepCopy)(t,r)}))),o)}}}]);